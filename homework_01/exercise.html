<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>
<!--script src="exercise.js" type="application/javascript"></script>-->
<script src="https://unpkg.com/rxjs/bundles/rxjs.umd.min.js"></script>
</head>
<body onload="run()">

<h1>This is a Heading</h1>
<p>This is a paragraph.</p>
<button onclick="promise();">Promise Fetch</button>
<button onclick="asyncFunc();">Async/Await Fetch</button>
<button onclick="reactjs();">Reactive Fetch</button>
<script>
  window.onload = run();
  Array.prototype.removeNum = function(num) {
	var i;
  for (i = 0; i < this.length; i++) {
	setTimeout(function() {
        if (this[i] === num) {
         this.splice(i, 1);

		}
    }, 1000);
  }
 };

  function run() {
    console.log('Start');
    var arr = [1, 3, 4, 2, 1, 5];
    arr.removeNum(1);
    console.log(arr);
    console.log('Finish');
  }

  function promise() {
    const p = fetch("https://randomuser.me/api/");
    p.then(data => data.json())
    .then(data => console.log(data))
    .catch((err) => console.error(err));
  }

  async function asyncFunc() {
    try {
      let results = await fetch("https://randomuser.me/api/");
      console.log(results.json());
    } catch (err) {
      console.error(err);
    }
  }

  function reactjs() {
    const { Observable } = rxjs;
    // const obs$ = Observable.create(function (observer) {
    //   observer.next(fetch("https://randomuser.me/api/"));
    //   setTimeout(() => {observer.complete();}, 2000);
    // });
    // const subscription = obs$.subscribe({
    //   function(data) {console.log(data.json());},
    //   function(err) {console.error(err);}
    // });

    const p = fetch("https://randomuser.me/api/");
    from(p).subscribe((e) => console.log(e));
  }
  

  </script>
</body>
</html>
